(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{552:function(t,e,o){"use strict";o.r(e);var n=o(477),l=o(214),r=o(74),d=o(496),c=o(502),_=o(550),f=o(551),m=o(141),v=o(508),h=o(495),y=o(494),x=o(481),k=(o(29),o(224),o(28),o(65),{data:function(){return{data:[],disabledExportButton:!1,response:!1,snackbar:!1,dialog:!1,from_date:null,from_menu:!1,to_date:null,to_menu:!1,Model:"Report",total:0,headers:[{text:"Worker Number",align:"left",sortable:!1,value:"user_id"},{text:"Log Date",align:"left",sortable:!1,value:"log_date"},{text:"Log Time",align:"left",sortable:!1,value:"log_time"},{text:"Type",align:"left",sortable:!1,value:"type"},{text:"Device Location",align:"left",sortable:!1,value:"device_id"}],options:{},columns:{},payload:{per_page:5,from_date:null,to_date:null,user_id:0}}},computed:{},watch:{dialog:function(t){t||this.close(),this.errors=[],this.search=""},options:{handler:function(){this.getDataFromApi()},deep:!0}},created:function(){this.loading=!1;var dt=new Date,t=dt.getFullYear(),e=dt.getMonth()+1,o=dt.getDate();o=o<10?"0"+o:o,e=e<10?"0"+e:e,this.payload.from_date="".concat(t,"-").concat(e,"-").concat(o-1),this.payload.to_date="".concat(t,"-").concat(e,"-").concat(o)},methods:{disabledExport:function(){this.disabledExportButton=!0},getDataFromApi:function(){var t=this,e=this.options,o=e.page,n={params:{per_page:e.itemsPerPage||100,page:o,from:this.payload.from_date,to:this.payload.to_date,user_id:this.payload.user_id}};this.$axios.get("http://localhost:8000/api/log",n).then((function(e){var data=e.data;t.data=data.data,t.total=data.total}))},json_to_csv:function(t){var e="";return t.map((function(t){return e+="".concat(t.user_id,"  ").concat(t.log_date,"  ").concat(t.log_time,"  ").concat(t.type,"  ").concat(t.device_id)+"\n"})),e},sync_record:function(){var t=this;this.$axios.post("/sync_from_mdb").then((function(e){var data=e.data;data.status||void 0===data.status?t.getDataFromApi():alert(data.message)}))},filter_record:function(){var t=this,e=this.options,o=e.page,n={params:{per_page:e.itemsPerPage||100,page:o,from:this.payload.from_date,to:this.payload.to_date,user_id:this.payload.user_id}};this.$axios.get("/log",n).then((function(e){var data=e.data;t.data=data.data,t.total=data.total,t.data.length&&(t.disabledExportButton=!1)}))},export_record:function(){if(this.data.length){var t=this.payload,e=t.from_date,o=t.to_date,n=t.user_id,a=document.createElement("a");a.setAttribute("href","http://localhost:8000/api/export?from=".concat(e,"&to=").concat(o,"&user_id=").concat(n)),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}}}),C=o(104),component=Object(C.a)(k,(function(){var t=this,e=t._self._c;return e(c.a,[e(l.a,{attrs:{outlined:""}},[e(r.b,[e(c.a,[e(h.a,[e(d.a,[e("div",{staticClass:"text-left"},[e(v.a,{ref:"from_menu",attrs:{"close-on-content-click":!1,"return-value":t.from_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.from_date=e},"update:return-value":function(e){t.from_date=e}},scopedSlots:t._u([{key:"activator",fn:function(o){var n=o.on,l=o.attrs;return[e(x.a,t._g(t._b({attrs:{label:"From Date","hide-details":!t.payload.from_date,outlined:"",dense:"",readonly:""},model:{value:t.payload.from_date,callback:function(e){t.$set(t.payload,"from_date",e)},expression:"payload.from_date"}},"v-text-field",l,!1),n))]}}]),model:{value:t.from_menu,callback:function(e){t.from_menu=e},expression:"from_menu"}},[t._v(" "),e(f.a,{attrs:{"no-title":"",scrollable:""},model:{value:t.payload.from_date,callback:function(e){t.$set(t.payload,"from_date",e)},expression:"payload.from_date"}},[e(y.a),t._v(" "),e(n.a,{staticClass:"blue-grey",attrs:{small:"",dark:""},on:{click:function(e){t.from_menu=!1}}},[t._v("\n                    Cancel\n                  ")]),t._v(" "),e(n.a,{staticClass:"blue-grey darken-3",attrs:{small:"",dark:""},on:{click:function(e){return t.$refs.from_menu.save(t.payload.from_date)}}},[t._v("\n                    OK\n                  ")])],1)],1)],1)]),t._v(" "),e(d.a,[e("div",{staticClass:"text-left"},[e(v.a,{ref:"to_menu",attrs:{"close-on-content-click":!1,"return-value":t.to_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.to_date=e},"update:return-value":function(e){t.to_date=e}},scopedSlots:t._u([{key:"activator",fn:function(o){var n=o.on,l=o.attrs;return[e(x.a,t._g(t._b({attrs:{label:"To Date","hide-details":!t.payload.to_date,outlined:"",dense:"",readonly:""},model:{value:t.payload.to_date,callback:function(e){t.$set(t.payload,"to_date",e)},expression:"payload.to_date"}},"v-text-field",l,!1),n))]}}]),model:{value:t.to_menu,callback:function(e){t.to_menu=e},expression:"to_menu"}},[t._v(" "),e(f.a,{attrs:{"no-title":"",scrollable:""},model:{value:t.payload.to_date,callback:function(e){t.$set(t.payload,"to_date",e)},expression:"payload.to_date"}},[e(y.a),t._v(" "),e(n.a,{staticClass:"blue-grey",attrs:{small:"",dark:""},on:{click:function(e){t.to_menu=!1}}},[t._v("\n                    Cancel\n                  ")]),t._v(" "),e(n.a,{staticClass:"blue-grey darken-3",attrs:{small:"",dark:""},on:{click:function(e){return t.$refs.to_menu.save(t.payload.to_date)}}},[t._v("\n                    OK\n                  ")])],1)],1)],1)]),t._v(" "),e(d.a,[e("div",{staticClass:"text-left"},[e(x.a,{attrs:{label:"User Id (optional)","hide-details":!t.payload.user_id,outlined:"",dense:""},on:{keyup:t.disabledExport},model:{value:t.payload.user_id,callback:function(e){t.$set(t.payload,"user_id",e)},expression:"payload.user_id"}})],1),t._v("\n            faaxio\n          ")]),t._v(" "),e(d.a,{staticClass:"text-right"},[e(n.a,{attrs:{"x-small":"",loading:t.loading,color:"blue darken-2",dark:""},on:{click:t.filter_record}},[e(m.a,{staticClass:"pr-1",attrs:{small:""}},[t._v("mdi-filter")]),t._v("\n              Filter\n            ")],1),t._v(" "),e(n.a,{attrs:{"x-small":"",disabled:t.disabledExportButton,color:"blue-grey darken-4",loading:t.loading,dark:""},on:{click:t.export_record}},[e(m.a,{staticClass:"pr-1",attrs:{small:""}},[t._v("mdi-upload")]),t._v("\n              Export\n            ")],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12 "}},[e(_.a,{attrs:{headers:t.headers,items:t.data,"server-items-length":t.total,loading:t.loading,options:t.options,"footer-props":{itemsPerPageOptions:[100,200,300,400,500]}},on:{"update:options":function(e){t.options=e}}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);